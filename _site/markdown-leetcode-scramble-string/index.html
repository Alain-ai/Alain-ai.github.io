<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>LeetCode | Scramble String in Python - Java, Python, Machine Learning, LeetCode</title>
    <meta name="keywords" content="Java, Python, Machine Learning, LeetCode">
    <meta name="description" content="The personal site of Alain, MLer and programmer. I write about Java, Python, Machine Learning and my code on LeetCode Here.">
    <meta name="author" content="Alain">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/static/favicon.ico" rel="shortcut icon">
    <link href="/static/css/bootstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/static/css/font-awesome.css" rel="stylesheet" type="text/css" media="all">
    <link href="/static/google-code-prettify/prettify.css" rel="stylesheet" type="text/css" media="all">
    <link href="/static/css/application.css" rel="stylesheet" type="text/css" media="all">
    <script src="/static/js/jquery.js" type="text/javascript"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

</head>
<body>
     <div class="page-container">
     <div class="page-heading">
         <div class="page-brand">
             <h1><a href="/">Alain</a></h1>
             <h2><a href="/tags.html">Java Intermediate, Python Beginner, Machine Learning Fan</a></h2>

         </div>
         <div class="page-navbar">
             <div class="page-navbar-container">
                 <ul class="page-nav">
                     <li><a href="/">Home</a></li>
                     <!-- <li><a href="/about.html">About</a></li> -->
                     <li><a href="/categories.html">Categories</a></li>
                     <li><a href="/tags.html">Tags</a></li>
                     <li><a href="/archive.html">Archives</a></li>
                 </ul>
             </div>
         </div>
     </div>
     <div class="page-article">
         <div class="page-content">
    <div class="post-heading">
        LeetCode | Scramble String in Python
    </div>
    <div class="post-meta">
        <!-- <span>
            date:
            <a href="/markdown-leetcode-scramble-string/">10/2014</a>
        </span>
        <span><i class="fa fa-ellipsis-v"></i></span> -->
        <span>
            category:
            
            <a href="/categories.html#leetcode-ref">leetcode</a>
            
        </span>
        <span><i class="fa fa-ellipsis-v"></i></span>
        <span>
            tag:
            
            <a href="/tags.html#Python-ref">Python</a>
            
        <span>
    </div>
    <div class="post-entry">
        <!-- import js for mathjax -->


<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>




<pre>
'''
Question:
    Given a string s1, we may represent it as a binary tree by partitioning it to two non-empty substrings recursively. Below is one possible representation of s1 = "great":

    great
   /    \
  gr    eat
 / \    /  \
g   r  e   at
           / \
          a   t
    To scramble the string, we may choose any non-leaf node and swap its two children. For example, if we choose the node "gr" and swap its two children, it produces a scrambled string "rgeat".

    rgeat
   /    \
  rg    eat
 / \    /  \
r   g  e   at
           / \
          a   t
    We say that "rgeat" is a scrambled string of "great". Similarly, if we continue to swap the children of nodes "eat" and "at", it produces a scrambled string "rgtae".

    rgtae
   /    \
  rg    tae
 / \    /  \
r   g  ta  e
       / \
      t   a
    We say that "rgtae" is a scrambled string of "great". Given two strings s1 and s2 of the same length, determine if s2 is a scrambled string of s1.

Algorithm:
    to determine if s2 is a scrambled string of s1, we have to check split s1 into two parts at every possible position and do the same thing with s2 from two sides. And if there exists one splitting position to let the two parts of s1 and s2 match, we will get the result.
'''


class Solution:
    # @return a boolean
    def isScramble(self, s1, s2):
        return self.is_scramble_rec(s1, s2, 0, len(s1)-1, 0, len(s2)-1)

    def is_scramble_rec(self, s1, s2, stt1, end1, stt2, end2):
        if end1 - stt1 != end2 - stt2:
            return False
        if s1[stt1:end1+1] == s2[stt2:end2+1]:
            return True
        cnt = [0 for i in xrange(26)]
        for i in xrange(stt1, end1+1):
            cnt[ord(s1[i]) - ord('a')] += 1
        for i in xrange(stt2, end2+1):
            cnt[ord(s2[i]) - ord('a')] -= 1
        if any(cnt):
            return False
        for i in xrange(0, end1-stt1):
            return (self.is_scramble_rec(s1, s2, stt1, stt1+i, stt2, stt2+i) and self.is_scramble_rec(s1, s2, stt1+i+1, end1, stt2+i+1, end2)) or (self.is_scramble_rec(s1, s2, stt1, stt1+i, end2-i, end2) and self.is_scramble_rec(s1, s2, stt1+i+1, end1, stt2, end1-(stt1+i+1)+stt2))
        return False
</pre>


    </div>
</div>
<div class="post-blank post-pager">
    <ul class="pager">
        
        <li class="previous"><a href="/markdown-leetcode-distinct-subsequences/">&larr; previous post</a></li>
        
        
        <li class="next"><a href="/markdown-leetcode-sum-root-to-leaf-numbers/">next post &rarr;</a></li>
        
    </ul>
</div>
<div class="page-blank">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'heaiinfo';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>
        Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
</div>


     </div>
     <div class="page-footer">
         <span>
             Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>
             | Hosted by <a href="http://github.com">Github.com</a>
             | <span class="page-generator-time">11/03/2014 </span>
         </span>
     </div>
     </div>
     <script src="/static/js/bootstrap.js" type="text/javascript"></script>
     <script src="/static/google-code-prettify/prettify.js" type="text/javascript"></script>
     <script type="text/javascript">
        $(document).ready(function() {
            $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto');
            prettyPrint();
        });
     </script>
     <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54880616-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>
